  <hr>
<p>この下にボタンが表示されている場合はらくらくインストールができます。</p>
  <button id="installButton" style="display: none;">らくらくインストールを実行</button>
  <p>表示されていない場合はショートカットを作ってくださいその時に[ウィンドウとして開く]を選択してください。</p>
  <hr>
  <head>
<link rel="manifest" href="https://raw.githubusercontent.com/ajt2000000/Eagkle/main/manifest.json"/>
      <link rel="icon" href="favicon.png">
      <script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('sw.js').then(function(registration) {
    // 登録成功
    console.log('ServiceWorker の登録に成功しました。スコープ: ', registration.scope);
  }).catch(function(err) {
    // 登録失敗
    console.log('ServiceWorker の登録に失敗しました。', err);
  });
}
</script>
          <script>
        window.addEventListener('load', () => {
            let deferredPrompt;
            const installButton = document.getElementById('installButton');

            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                installButton.style.display = 'block';

                installButton.addEventListener('click', () => {
                    deferredPrompt.prompt();
                    deferredPrompt.userChoice.then((choiceResult) => {
                        if (choiceResult.outcome === 'accepted') {
                            console.log('User accepted the A2HS prompt');
                            setTimeout(() => {
                              if(!alert("インストールが完了しました。サイトを閉じてください。")){
                                window.close();
                              }
                            }, 1000);
                        } else {
                            console.log('User dismissed the A2HS prompt');
                        }
                        deferredPrompt = null;
                    });
                });
            });
        });
    </script>
  </head>
